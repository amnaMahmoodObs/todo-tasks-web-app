<!--
Sync Impact Report:
- Version change: [INITIAL] ‚Üí 1.0.0
- Modified principles: N/A (initial version)
- Added sections:
  * Core Principles (7 principles)
  * Code Quality Standards
  * Development Workflow
  * Governance
- Removed sections: N/A
- Templates requiring updates:
  ‚úÖ .specify/templates/plan-template.md (reviewed, compatible)
  ‚úÖ .specify/templates/spec-template.md (reviewed, compatible)
  ‚úÖ .specify/templates/tasks-template.md (reviewed, compatible)
- Follow-up TODOs: None
-->

# Todo Console Application Constitution

## Core Principles

### I. Spec-Driven Development (NON-NEGOTIABLE)

All code MUST be generated by Claude Code from specifications. Manual coding is strictly prohibited.

**Workflow:**
- Write or refine specification document
- Claude Code generates implementation from spec
- Test the generated code
- If issues found, refine the specification only (never manual code edits)
- Repeat until acceptance criteria met

**Rationale:** This principle ensures consistency, traceability, and aligns with the hackathon's learning objective of mastering spec-driven development. All code artifacts must be traceable to their originating specification.

### II. Claude Code as Primary Tool

Claude Code is the exclusive code generation engine for this project.

**Requirements:**
- All implementation tasks executed via Claude Code
- Specifications written for Claude Code consumption
- No direct file editing outside of spec refinement
- All architectural decisions documented for Claude Code reference

**Rationale:** Establishes single source of truth for code generation and ensures consistent application of patterns and standards.

### III. Clean Architecture

The application MUST follow a clear separation of concerns with these modules:

**Required Structure:**
- `main.py`: Application entry point and CLI event loop only
- `cli.py`: User interface logic (prompts, menus, display formatting)
- `todo.py`: Todo class definition (data model and business logic)
- `storage.py`: In-memory storage implementation using Python dict/list

**Rationale:** Clear module boundaries enable independent testing, easier reasoning about code, and prepare the codebase for Phase II evolution (persistence layer swap).

### IV. Type Safety and Documentation

All code MUST include:
- Type hints on all function signatures and class attributes
- Docstrings in Google style for all public functions and classes
- Return type annotations
- Parameter type annotations

**Example:**
```python
def create_todo(title: str, description: str) -> Todo:
    """Create a new todo item.

    Args:
        title: Brief title for the task
        description: Detailed description

    Returns:
        Newly created Todo instance
    """
```

**Rationale:** Type hints enable early error detection, improve IDE support, and serve as inline documentation. Required for Phase III+ as complexity grows.

### V. Robust Error Handling

All user inputs and operations MUST be validated with friendly error messages.

**Requirements:**
- Validate all user inputs before processing
- Catch and handle all exceptions gracefully
- Provide actionable error messages (what went wrong, how to fix)
- Never expose stack traces to end users
- Log errors for debugging while showing user-friendly messages

**Example Error Messages:**
- ‚úÖ "Error: Task ID '5' not found. Use 'list' to see available tasks."
- ‚ùå "KeyError: 5"

**Rationale:** Console applications must be user-friendly and resilient. Clear error messages reduce frustration and support learning objectives.

### VI. Standard Library Only

No external dependencies beyond Python 3.13+ standard library are permitted in Phase I.

**Rationale:** Minimizes setup complexity, ensures portability, and focuses learning on core Python patterns. External dependencies will be introduced in later phases as architectural needs evolve.

### VII. Hackathon Evolution Readiness

All Phase I decisions MUST consider the 5-phase evolution roadmap.

**Phase Roadmap:**
- Phase I: In-memory CLI (current)
- Phase II: File persistence
- Phase III: SQLite database
- Phase IV: REST API + web frontend
- Phase V: Cloud-native Kubernetes deployment

**Requirements:**
- Use interfaces/protocols where persistence abstraction will be needed
- Avoid Phase I decisions that would require rewrites in later phases
- Document architectural decisions with future phases in mind
- Keep business logic separate from infrastructure concerns

**Rationale:** Each phase builds on the previous. Poor architectural choices now create technical debt that compounds across 5 phases.

## Code Quality Standards

### Python Standards

- MUST follow PEP 8 style guide
- MUST use Python 3.13+ features where appropriate
- MUST use UV package manager for dependency management
- MUST pass type checking (mypy or similar)

### Clean Code Principles

- Functions MUST do one thing and do it well
- Maximum function length: 25 lines (excluding docstrings)
- Maximum module length: 300 lines
- Descriptive naming: no abbreviations except standard ones (id, db, ui)
- No magic numbers: use named constants
- DRY: Do not repeat yourself

### Data Model

Each Todo MUST have:
- `id`: Unique integer identifier (auto-incrementing)
- `title`: String, required, max 100 characters
- `description`: String, optional
- `completed`: Boolean, default False
- `created_at`: datetime timestamp, auto-set on creation

## Development Workflow

### Feature Implementation (MANDATORY)

1. **Write Specification**: Create or update spec in `/specs/<feature>/spec.md`
2. **Generate Plan**: Run `/sp.plan` to create implementation plan
3. **Generate Tasks**: Run `/sp.tasks` to break down work
4. **Implement via Claude Code**: Execute tasks using Claude Code
5. **Test**: Manually verify all 5 CRUD operations
6. **Iterate**: If issues found, update spec and regenerate (never manual edits)

### CRUD Operations (Phase I Scope)

The application MUST implement exactly these 5 operations:

1. **Add Task**: Create new todo with title and optional description
2. **View Tasks**: List all tasks with their status
3. **Update Task**: Modify title or description of existing task
4. **Delete Task**: Remove task by ID
5. **Mark Complete**: Toggle completion status by ID

### Testing Requirements

- Manual testing required for all CRUD operations
- Test error handling for invalid inputs
- Test edge cases (empty list, invalid IDs, boundary conditions)
- Automated tests NOT required in Phase I (deferred to Phase II)

### Version Control

- Commit after each completed task
- Meaningful commit messages following conventional commits format
- Branch naming: `<issue-number>-<feature-description>`
- This constitution lives in version control and evolves with the project

## Governance

### Constitution Authority

This constitution supersedes all other development practices and guidelines. When conflicts arise between this document and external resources, this constitution takes precedence.

### Amendment Process

1. Amendments MUST be proposed with clear rationale
2. Constitution version MUST be incremented using semantic versioning:
   - **MAJOR**: Backward incompatible principle changes (e.g., removing spec-driven requirement)
   - **MINOR**: New principles added (e.g., adding security principle)
   - **PATCH**: Clarifications, typo fixes, non-semantic changes
3. Last Amended date MUST be updated to current date
4. Sync Impact Report MUST be added as HTML comment at top of file
5. All dependent templates MUST be reviewed and updated if needed

### Compliance

- All specifications MUST reference this constitution
- All generated code MUST adhere to these principles
- Plan templates MUST include "Constitution Check" gates
- Violations MUST be justified in "Complexity Tracking" section of plan
- No violations permitted for NON-NEGOTIABLE principles

### Architectural Decision Records

When architecturally significant decisions are made (detected during planning or task generation):
- AI MUST suggest: "üìã Architectural decision detected: <brief> ‚Äî Document reasoning and tradeoffs? Run `/sp.adr <decision-title>`"
- User consent required before creating ADR
- ADRs stored in `history/adr/`
- Significance test: (1) long-term impact? (2) alternatives considered? (3) cross-cutting scope?

**Version**: 1.0.0 | **Ratified**: 2026-01-22 | **Last Amended**: 2026-01-22
